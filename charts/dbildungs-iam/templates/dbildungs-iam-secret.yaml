{{- if not .Values.secrets.name}}
apiVersion: v1
kind: Secret
metadata:
  name: {{.Release.Name}}-secret
  labels:
    app.kubernetes.io/name: dbildungs-iam
data:
  config.dev.json: |-
{{.Files.Get .Values.configfile.dev | b64enc | indent 4}}
  config.test.json: |-
{{.Files.Get .Values.configfile.test | b64enc | indent 4}}
  config.prod.json: |-
{{- if .Values.deployDedicatedDB}}
{{.Files.Get .Values.configfile.local | b64enc | indent 4}}
{{- else}}
{{.Files.Get .Values.configfile.prod | b64enc | indent 4}}
{{- end}}
  secrets.json: |-
{{.Files.Get .Values.configfile.secrets | b64enc | indent 4}}
{{- end}}