---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "common.names.name" . }}-kafka-init-configmap
  namespace: {{ template "common.names.namespace" . }}
  labels: {{- include "common.labels" . | nindent 4 }}
type: Opaque
data:
  create_topics.sh: |-
    {{ .Files.Get "kafka/scripts/create_topics.sh" | nindent 4 }}
  topics.txt: |-
    {{ .Values.kafka_init.topics | toStrings | nindent 4  }}
  config.properties: |-
    {{ .Values.kafka_init.jaas | toString | nindent 4 }}
